<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Video Player JS</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans|Roboto" rel="stylesheet">
    <link rel="icon" href="data:,">
    <style>
        html,body{
            margin: 0;
            padding: 0;
            font-size: 14px;
            font-family: sans-serif;
            /* color: #111;
            background-color: #eee;
            display: flex;
            justify-content: center;
            align-items: center; */
        }

        .view {
          display: -webkit-box;
          display: -moz-box;
          display: -ms-flexbox;
          display: -webkit-flex;
          display: flex;
          -webkit-flex-direction: row;
          -moz-flex-direction: row;
          -ms-flex-direction: row;
          -o-flex-direction: row;
          flex-direction: row;
          -webkit-box-pack: center;
          -moz-box-pack: center;
          -ms-flex-pack: center;
          -webkit-justify-content: center;
          justify-content: center;
          margin: 0 auto;
          background: #fff;
          max-width: 1280px;
        }

        .view-l {
          -ms-flex: 1;
          -webkit-flex: 1;
          -moz-flex: 1;
          flex: 1;
          padding: 25px;
        }

        .vplayer-custom-modal.vplayer-modal .vplayer-modal-content-box {
          background: transparent;
        }


        .vplayer-custom-modal.vplayer-modal .vplayer-modal-content {
          padding: 0;
        }
    </style>
  </head>
  <body>
    <div class="view">
      <div class="view-l">
        <div id="app" class=""></div>
        <div id="app2" style="margin-top: 25px;" class=""></div>
        <div class="trigger-modal">Click to open modal</div>
      </div>
      <div class="view-s">

      </div>
    </div>

    <button class="modal-trigger">Click to open Modal</button>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        var { Modal, Vplayer } = VplayerJS;
        var vplayer;

        var modalOptions = {
          cssClass: ['vplayer-custom-modal'],
          onOpen: function () { modalToggle(true) },
          onClose: function () { modalToggle(false) },
          closeIconPosition: 'outside'
        };

        var vplayerModal = new Modal(modalOptions);
        vplayerModal.init();
        vplayerModal.setContent('<div id="v-app" class=""></div>');


        var options = {
          autoplay: false,
          enableCaptions: false,
          preload: 'auto',
          controlslist: 'nodownload',
          loop: false,
          muted: false,
          bookmarkURL: ''
        };
        options.src = [
          {
            id: '1',
            lang: [
              {
                id: '1.1',
                url: 'http://61.12.44.50/flexshare/webserver/sample_videos/video1.mp4',
                type: 'video/mp4',
                poster: null,
                info: {
                  title: 'Vernier Caliper',
                  titleExternalLink: 'http://61.12.44.50/flexshare/webserver/sample_videos/video1.mp4',
                  titleLinkTarget: '_blank',
                },
                tracks: [],
                playingState: true,
                language: 'en',
              },
              {
                id: '1.2',
                url: 'http://61.12.44.50/flexshare/webserver/sample_videos/video3.mp4',
                type: 'video/mp4',
                poster: 'https://i.ytimg.com/vi/4YQZxm8jql0/hqdefault.jpg?sqp=-oaymwEZCNACELwBSFXyq4qpAwsIARUAAIhCGAFwAQ==&rs=AOn4CLBSztal6XTUliFHKqJUZ1kaqufgHg',
                info: {
                  title: 'Verification of Law of Forces',
                  titleExternalLink: 'http://61.12.44.50/flexshare/webserver/sample_videos/video3.mp4',
                  titleLinkTarget: '_blank',
                },
                tracks: [],
                playingState: false,
                language: 'de'
              }
            ],
            // url: 'http://61.12.44.50/flexshare/webserver/sample_videos/video1.mp4',
            // type: 'video/mp4',
            // poster: null,
            // info: {
            //   title: 'Vernier Caliper',
            //   titleExternalLink: 'http://61.12.44.50/flexshare/webserver/sample_videos/video1.mp4',
            //   titleLinkTarget: '_blank',
            // },
            // tracks: []
          },
          {
            id: '2',
            lang: [
              {
                id: '2.1',
                url: 'http://61.12.44.50/flexshare/webserver/sample_videos/video2.mp4',
                type: 'video/mp4',
                poster: null,
                info: {
                  title: 'Screw Gauge',
                  titleExternalLink: 'http://61.12.44.50/flexshare/webserver/sample_videos/video2.mp4',
                  titleLinkTarget: '_blank',
                },
                tracks: [],
                playingState: true,
                language: 'en',
              },
              {
                id: '2.2',
                url: 'http://61.12.44.50/flexshare/webserver/sample_videos/video1.mp4',
                type: 'video/mp4',
                poster: null,
                info: {
                  title: 'Vernier Caliper',
                  titleExternalLink: 'http://61.12.44.50/flexshare/webserver/sample_videos/video1.mp4',
                  titleLinkTarget: '_blank',
                },
                tracks: [],
                playingState: false,
                language: 'de'
              }
            ]
          },
          {
            id: '3',
            lang: [
              {
                id: '3.1',
                url: 'http://61.12.44.50/flexshare/webserver/sample_videos/video3.mp4',
                type: 'video/mp4',
                poster: 'https://i.ytimg.com/vi/4YQZxm8jql0/hqdefault.jpg?sqp=-oaymwEZCNACELwBSFXyq4qpAwsIARUAAIhCGAFwAQ==&rs=AOn4CLBSztal6XTUliFHKqJUZ1kaqufgHg',
                info: {
                  title: 'Verification of Law of Forces',
                  titleExternalLink: 'http://61.12.44.50/flexshare/webserver/sample_videos/video3.mp4',
                  titleLinkTarget: '_blank',
                },
                tracks: [],
                playingState: true,
                language: 'en',
              },
              {
                id: '3.2',
                url: 'http://61.12.44.50/flexshare/webserver/sample_videos/video2.mp4',
                type: 'video/mp4',
                poster: null,
                info: {
                  title: 'Screw Gauge',
                  titleExternalLink: 'http://61.12.44.50/flexshare/webserver/sample_videos/video2.mp4',
                  titleLinkTarget: '_blank',
                },
                tracks: [],
                playingState: false,
                language: 'de'
              }
            ]
          },
          {
            id: '4',
            url: 'http://media.w3.org/2010/05/sintel/trailer.mp4',
            type: 'video/mp4',
            poster: 'http://media.w3.org/2010/05/sintel/poster.png',
            info: {
              title: 'Sample Video',
              titleExternalLink: 'http://brenopolanski.com/html5-video-webvtt-example/MIB2.mp4',
              titleLinkTarget: '_blank',
            }
          },
          {
            id: '5',
            url: 'http://brenopolanski.com/html5-video-webvtt-example/MIB2.mp4',
            type: 'video/mp4',
            info: {
              title: 'Sample Video 2',
              titleExternalLink: 'http://brenopolanski.com/html5-video-webvtt-example/MIB2.mp4',
              titleLinkTarget: '_blank',
            },
            tracks: [
              {
                src: 'http://brenopolanski.com/html5-video-webvtt-example/MIB2-subtitles-pt-BR.vtt',
                lang: 'en',
                label: 'English',
                kind: 'subtitles',
                default: true,
                mode: 'hidden'
              }
            ]
          },
          {
            id: '6',
            url: 'http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/TearsOfSteel.mp4',
            type: 'video/mp4',
            info: {
              title: 'Tears of Steel',
              titleExternalLink: 'http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/TearsOfSteel.mp4',
              titleLinkTarget: '_blank',
            }
          },
        ];

        function modalToggle(isOpen) {
          var el = document.querySelector('#v-app');
          if (el !== null) {
            if (isOpen) {
              options.isModal = true;
              options.modalClass = modalOptions.cssClass[0];
              vplayer = new Vplayer(el, options);
              vplayer.init();
            } else {
              vplayer.destroy();
            }
          }
        }

        document.querySelector('.modal-trigger').addEventListener('click', function() {
          vplayerModal.open();
        });

        // Code to add in a page dom instead of modal
        var el = document.querySelector('#app');
        let vplayerNew = new Vplayer(el, options);
        vplayerNew.init();

        // Code to add in a page dom instead of modal
        var el = document.querySelector('#app2');
        let vplayerNew2 = new Vplayer(el, options);
        vplayerNew2.init();
      });
    </script>
  </body>
</html>
